@using RestApiClient.Models;
@using Common.Models
@model IQueryable<News>

<h3>Новости космоса</h3>
@{ string controllerName = "News"; }
@if (User.IsInRole("Administrator"))
{
    @Html.ActionLink("Обновить новости из Api", "Index", "ImportNews", null, new { @class = "btn btn-secondary text-white" })
    <a href="/@controllerName/GetXlsx" class="btn btn-outline-light bg-secondary text-white" title="Скачать таблицу в Excel">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-file-earmark-spreadsheet" viewBox="0 0 16 16">
            <path d="M14 14V4.5L9.5 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2zM9.5 3A1.5 1.5 0 0 0 11 4.5h2V9H3V2a1 1 0 0 1 1-1h5.5v2zM3 12v-2h2v2H3zm0 1h2v2H4a1 1 0 0 1-1-1v-1zm3 2v-2h3v2H6zm4 0v-2h3v1a1 1 0 0 1-1 1h-2zm3-3h-3v-2h3v2zm-7 0v-2h3v2H6z" />
        </svg>
    </a>

    <a href="/ImportInfo/Index" class="btn btn-outline-light bg-secondary text-white" title="Информация об Api">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-info-square" viewBox="0 0 16 16">
            <path d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z" />
            <path d="m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533L8.93 6.588zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0z" />
        </svg>
    </a>
    <br />
    <br />
}
@(Html
    .Grid(Model)
    .Build(columns =>
    {
        columns.Add(model => model.Title).Titled("Название статьи");
        columns.Add(model => model.Summary).Titled("Описание статьи");
        columns.Add(model => model.NewsSite).Titled("Название источника");
        if (User.IsInRole("Administrator"))
        {
            columns.Add(model => Html.Partial("GridCellDelete", new GridCellActionViewModel() { Id = model.Id, ControllerName = controllerName })).Css("grid-cell-action").Titled("Действия");
        }
    })
    //.UsingFilterMode(GridFilterMode.Row)
    .Empty("Нет информации")
    .Filterable()
    .Sortable()
    .Pageable()
)
